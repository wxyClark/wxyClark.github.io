# Python 基础入门：变量、数据类型与运算符

## 一、变量与赋值

### 1.1 变量定义

Python 是动态类型语言，变量无需声明类型，直接赋值即可使用。

```python
# 变量赋值
name = "张三"
age = 25
height = 1.75
is_student = True

# 多变量赋值
a, b, c = 1, 2, 3

# 交换变量值
x, y = 10, 20
x, y = y, x  # x=20, y=10

# 链式赋值
num1 = num2 = num3 = 100
```

### 1.2 变量命名规则

- 只能包含字母、数字和下划线
- 不能以数字开头
- 不能使用 Python 关键字
- 区分大小写
- 见名知意，使用下划线命名法（snake_case）

```python
# 正确命名
user_name = "admin"
total_price = 99.99
is_active = True

# 错误命名
# 2name = "error"  # 不能以数字开头
# class = "error"  # 不能使用关键字
# user-name = "error"  # 不能使用连字符
```

## 二、数据类型

### 2.1 基本数据类型

#### 2.1.1 整数（int）

```python
# 整数定义
num1 = 10
num2 = -5
num3 = 0

# 不同进制的表示
binary = 0b1010      # 二进制：10
octal = 0o12         # 八进制：10
hexadecimal = 0xA    # 十六进制：10

# 大整数（Python 3 无大小限制）
big_num = 123456789012345678901234567890
```

#### 2.1.2 浮点数（float）

```python
# 浮点数定义
price = 19.99
discount = 0.5
scientific = 1.23e-5  # 科学计数法：0.0000123

# 浮点数精度问题
result = 0.1 + 0.2  # 结果为 0.30000000000000004
print(round(result, 2))  # 四舍五入：0.30
```

#### 2.1.3 布尔值（bool）

```python
# 布尔值
is_valid = True
is_empty = False

# 布尔运算
print(True and False)  # False
print(True or False)   # True
print(not True)        # False

# 类型转换
print(bool(0))         # False
print(bool(1))         # True
print(bool(""))        # False
print(bool("hello"))   # True
```

#### 2.1.4 字符串（str）

```python
# 字符串定义
str1 = '单引号字符串'
str2 = "双引号字符串"
str3 = """三引号字符串
可以跨行"""

# 字符串操作
text = "Hello World"
print(text.upper())      # 转大写：HELLO WORLD
print(text.lower())      # 转小写：hello world
print(text.title())      # 标题化：Hello World
print(text.strip())      # 去除首尾空格

# 字符串格式化
name = "张三"
age = 25
print(f"我叫{name}，今年{age}岁")  # f-string（推荐）
print("我叫{}，今年{}岁".format(name, age))
print("我叫%s，今年%d岁" % (name, age))

# 字符串切片
text = "Python编程"
print(text[0:6])      # Python
print(text[-2:])      # 编程
print(text[::2])      # Pto编（步长为2）

# 字符串常用方法
email = "user@example.com"
print(email.split("@"))      # ['user', 'example.com']
print(email.startswith("user"))  # True
print(email.endswith(".com"))    # True
print(email.find("@"))           # 4
print(email.replace("user", "admin"))  # admin@example.com
```

### 2.2 复合数据类型

#### 2.2.1 列表（list）

```python
# 列表定义
fruits = ["apple", "banana", "orange"]
numbers = [1, 2, 3, 4, 5]
mixed = [1, "hello", 3.14, True]

# 列表操作
fruits.append("grape")        # 添加元素
fruits.insert(1, "pear")      # 插入元素
fruits.remove("banana")       # 删除元素
fruits.pop()                  # 删除并返回最后一个元素
fruits.pop(0)                 # 删除并返回指定位置元素

# 列表切片
numbers = [0, 1, 2, 3, 4, 5]
print(numbers[1:4])           # [1, 2, 3]
print(numbers[:3])            # [0, 1, 2]
print(numbers[3:])            # [3, 4, 5]
print(numbers[::2])           # [0, 2, 4]

# 列表推导式
squares = [x**2 for x in range(5)]  # [0, 1, 4, 9, 16]
even_numbers = [x for x in range(10) if x % 2 == 0]  # [0, 2, 4, 6, 8]

# 列表常用方法
numbers = [3, 1, 4, 1, 5, 9, 2, 6]
numbers.sort()                 # 排序：[1, 1, 2, 3, 4, 5, 6, 9]
numbers.reverse()              # 反转
print(len(numbers))            # 长度：8
print(numbers.count(1))       # 统计元素出现次数：2
print(numbers.index(5))        # 查找元素位置：3
```

#### 2.2.2 元组（tuple）

```python
# 元组定义（不可变）
point = (10, 20)
colors = ("red", "green", "blue")
single_element = (1,)  # 单元素元组需要逗号

# 元组操作
print(point[0])        # 访问元素：10
print(point[1])        # 20
print(len(colors))     # 长度：3

# 元组解包
x, y = point
print(x, y)  # 10 20

# 元组与列表转换
my_tuple = (1, 2, 3)
my_list = list(my_tuple)      # [1, 2, 3]
back_to_tuple = tuple(my_list) # (1, 2, 3)

# 命名元组
from collections import namedtuple
Point = namedtuple('Point', ['x', 'y'])
p = Point(10, 20)
print(p.x, p.y)  # 10 20
```

#### 2.2.3 字典（dict）

```python
# 字典定义
student = {
    "name": "张三",
    "age": 20,
    "major": "计算机科学"
}

# 字典操作
student["grade"] = "大二"      # 添加键值对
student["age"] = 21            # 修改值
del student["major"]           # 删除键值对
print(student.get("name"))     # 获取值：张三
print(student.get("address", "未知"))  # 获取值，不存在返回默认值

# 字典常用方法
print(student.keys())          # 获取所有键
print(student.values())        # 获取所有值
print(student.items())         # 获取所有键值对
print("name" in student)       # 检查键是否存在：True

# 字典遍历
for key, value in student.items():
    print(f"{key}: {value}")

# 字典推导式
squares = {x: x**2 for x in range(5)}  # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}
```

#### 2.2.4 集合（set）

```python
# 集合定义（无序、不重复）
fruits = {"apple", "banana", "orange"}
numbers = set([1, 2, 3, 2, 1])  # {1, 2, 3}，自动去重

# 集合操作
fruits.add("grape")        # 添加元素
fruits.remove("apple")     # 删除元素
fruits.discard("pear")     # 删除元素（不存在不报错）

# 集合运算
set1 = {1, 2, 3, 4}
set2 = {3, 4, 5, 6}
print(set1 | set2)         # 并集：{1, 2, 3, 4, 5, 6}
print(set1 & set2)         # 交集：{3, 4}
print(set1 - set2)         # 差集：{1, 2}
print(set1 ^ set2)         # 对称差集：{1, 2, 5, 6}

# 集合常用方法
print(len(fruits))         # 长度
print(1 in numbers)        # 检查元素是否存在
```

### 2.3 类型转换

```python
# 类型转换函数
num_str = "123"
num_int = int(num_str)         # 字符串转整数：123
num_float = float("3.14")      # 字符串转浮点数：3.14
str_num = str(456)             # 数字转字符串："456"
bool_val = bool(1)             # 转布尔值：True

# 进制转换
print(bin(10))                 # 二进制：0b1010
print(oct(10))                 # 八进制：0o12
print(hex(10))                 # 十六进制：0xa

# 类型判断
print(type(123))               # <class 'int'>
print(isinstance(123, int))    # True
print(isinstance("hello", str))  # True
```

## 三、运算符

### 3.1 算术运算符

```python
# 基本运算符
a, b = 10, 3
print(a + b)      # 加法：13
print(a - b)      # 减法：7
print(a * b)      # 乘法：30
print(a / b)      # 除法：3.3333333333333335
print(a // b)     # 整除：3
print(a % b)      # 取余：1
print(a ** b)     # 幂运算：1000

# 复合赋值运算符
x = 10
x += 5   # x = x + 5  => 15
x -= 3   # x = x - 3  => 12
x *= 2   # x = x * 2  => 24
x /= 4   # x = x / 4  => 6.0
x //= 2  # x = x // 2 => 3.0
x %= 2   # x = x % 2  => 1.0
x **= 3  # x = x ** 3 => 1.0
```

### 3.2 比较运算符

```python
# 比较运算符
a, b = 5, 10
print(a == b)     # 等于：False
print(a != b)     # 不等于：True
print(a < b)      # 小于：True
print(a > b)      # 大于：False
print(a <= b)     # 小于等于：True
print(a >= b)     # 大于等于：False

# 字符串比较
print("apple" < "banana")  # True（按字典序比较）
print("A" < "a")           # True（ASCII码比较）
```

### 3.3 逻辑运算符

```python
# 逻辑运算符
a, b = True, False
print(a and b)   # 与：False
print(a or b)    # 或：True
print(not a)     # 非：False

# 短路求值
x = 0
result = x > 0 and 10 / x  # x > 0 为 False，不会执行 10 / x
print(result)  # False

# 逻辑运算符优先级：not > and > or
print(True or False and False)  # True（先 and 后 or）
```

### 3.4 成员运算符

```python
# 成员运算符
fruits = ["apple", "banana", "orange"]
print("apple" in fruits)      # True
print("grape" not in fruits)  # True

# 字符串成员判断
text = "Hello World"
print("Hello" in text)        # True
print("hello" in text)        # False（区分大小写）
```

### 3.5 身份运算符

```python
# 身份运算符（比较内存地址）
a = [1, 2, 3]
b = [1, 2, 3]
c = a

print(a is b)      # False（不同对象）
print(a is c)      # True（同一对象）
print(a == b)      # True（值相同）

# 小整数缓存（-5 到 256）
x = 256
y = 256
print(x is y)      # True

x = 257
y = 257
print(x is y)      # False（超出缓存范围）
```

### 3.6 位运算符

```python
# 位运算符
a, b = 10, 6  # 二进制：1010, 0110
print(a & b)   # 按位与：2 (0010)
print(a | b)   # 按位或：14 (1110)
print(a ^ b)   # 按位异或：12 (1100)
print(~a)      # 按位取反：-11
print(a << 2)  # 左移：40 (101000)
print(a >> 2)  # 右移：2 (10)
```

### 3.7 运算符优先级

```python
# 运算符优先级（从高到低）
# 1. 括号 ()
# 2. 幂运算 **
# 3. 正负号 +x, -x
# 4. 乘除取余 *, /, //, %
# 5. 加减 +, -
# 6. 位运算 <<, >>, &, |, ^
# 7. 比较运算符 <, >, <=, >=, ==, !=
# 8. 身份运算符 is, is not
# 9. 成员运算符 in, not in
# 10. 逻辑非 not
# 11. 逻辑与 and
# 12. 逻辑或 or

result = 2 + 3 * 4      # 14（先乘后加）
result = (2 + 3) * 4    # 20（括号优先）
result = 2 ** 3 * 4     # 32（先幂后乘）
```

## 四、实际应用场景

### 4.1 数据处理

```python
# 处理用户输入
user_input = "  张三,25,男  "
data = user_input.strip().split(",")
name = data[0]
age = int(data[1])
gender = data[2]
print(f"姓名：{name}，年龄：{age}，性别：{gender}")

# 数据统计
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
total = sum(numbers)
average = total / len(numbers)
max_num = max(numbers)
min_num = min(numbers)
print(f"总和：{total}，平均值：{average}，最大值：{max_num}，最小值：{min_num}")
```

### 4.2 字符串处理

```python
# 验证邮箱格式
email = "user@example.com"
if "@" in email and "." in email.split("@")[-1]:
    print("邮箱格式正确")
else:
    print("邮箱格式错误")

# 生成随机密码
import random
import string
chars = string.ascii_letters + string.digits + "!@#$%"
password = "".join(random.choice(chars) for _ in range(12))
print(f"随机密码：{password}")
```

### 4.3 数据结构应用

```python
# 统计词频
text = "hello world hello python world python python"
words = text.split()
word_count = {}
for word in words:
    word_count[word] = word_count.get(word, 0) + 1
print(word_count)  # {'hello': 2, 'world': 2, 'python': 3}

# 找出重复元素
numbers = [1, 2, 3, 2, 4, 5, 3, 6]
seen = set()
duplicates = set()
for num in numbers:
    if num in seen:
        duplicates.add(num)
    else:
        seen.add(num)
print(f"重复元素：{duplicates}")  # {2, 3}
```

## 五、面试常考题

### 5.1 可变与不可变类型

**问题：Python 中哪些是可变类型，哪些是不可变类型？**

**答案：**
- **不可变类型**：int, float, bool, str, tuple
- **可变类型**：list, dict, set

```python
# 不可变类型示例
a = 10
b = a
a = 20
print(b)  # 10（a 的改变不影响 b）

# 可变类型示例
list1 = [1, 2, 3]
list2 = list1
list1.append(4)
print(list2)  # [1, 2, 3, 4]（list1 的改变影响 list2）
```

### 5.2 深拷贝与浅拷贝

**问题：深拷贝和浅拷贝的区别是什么？**

**答案：**
- **浅拷贝**：只复制对象本身，不复制嵌套对象
- **深拷贝**：递归复制对象及其所有嵌套对象

```python
import copy

# 浅拷贝
list1 = [[1, 2], [3, 4]]
list2 = list1.copy()  # 或 copy.copy(list1)
list2[0][0] = 100
print(list1)  # [[100, 2], [3, 4]]（嵌套对象被修改）

# 深拷贝
list3 = [[1, 2], [3, 4]]
list4 = copy.deepcopy(list3)
list4[0][0] = 100
print(list3)  # [[1, 2], [3, 4]]（原对象不受影响）
```

### 5.3 类型转换注意事项

**问题：以下代码的输出是什么？**

```python
print(int("123"))      # 123
print(int("12.3"))     # ValueError
print(float("12.3"))   # 12.3
print(bool(""))        # False
print(bool("False"))   # True（非空字符串都为 True）
print(bool(0))         # False
print(bool(1))         # True
print(bool(None))      # False
```

### 5.4 列表与元组的区别

**问题：列表和元组的主要区别是什么？**

**答案：**
| 特性 | 列表 | 元组 |
|------|------|------|
| 可变性 | 可变 | 不可变 |
| 语法 | [] | () |
| 性能 | 较慢 | 较快 |
| 用途 | 存储可变数据 | 存储固定数据 |
| 方法 | 丰富 | 有限 |

```python
# 列表可以修改
my_list = [1, 2, 3]
my_list[0] = 100  # 正确

# 元组不能修改
my_tuple = (1, 2, 3)
# my_tuple[0] = 100  # TypeError
```

## 六、总结

### 6.1 关键要点

1. **变量**：动态类型，无需声明，直接赋值
2. **数据类型**：
   - 基本类型：int, float, bool, str
   - 复合类型：list, tuple, dict, set
3. **运算符**：算术、比较、逻辑、成员、身份、位运算
4. **类型转换**：int(), float(), str(), bool()
5. **可变与不可变**：理解内存管理和对象引用

### 6.2 最佳实践

1. 使用有意义的变量名
2. 注意浮点数精度问题
3. 合理使用数据类型
4. 理解可变与不可变类型的区别
5. 掌握列表推导式和字典推导式
6. 注意运算符优先级，必要时使用括号

### 6.3 学习建议

1. 多动手实践，理解每个知识点
2. 注意观察代码运行结果
3. 阅读官方文档，了解更多细节
4. 做练习题，巩固所学知识
5. 关注面试常考题，提前准备
