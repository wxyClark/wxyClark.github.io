---
sort: 6
---

# 技巧


* 首要的防御手段是封装变量
* 移除局部变量
* 变量改名
* 移动代码
* 函数改名
* 移动函数
* 拆分遍历
* 以查询取代派生变量
* 管道操作（如filter和map）可以帮助我们更快地看清被处理的元素以及处理它们的动作。
* 迁移式做法:如果有必要的话，先对函数体内部加以重构，使后面的提炼步骤易于开展。


## 渐进式修改

如果要重构一个已对外发布的API，在提炼出新函数之后，你可以暂停重构，将原来的函数声明为“不推荐使用”（deprecated），然后给客户端一点时间转为使用新函数。等你有信心所有客户端都已经从旧函数迁移到新函数，再移除旧函数的声明。