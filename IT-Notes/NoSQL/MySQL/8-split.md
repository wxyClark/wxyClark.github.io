---
sort: 8
---

# 拆分设计

拆分策略：按 查询主区分ID hash取模、范围分片；按 查询时段 年/月/周 拆分 区分冷热数据


## 分库

* 采用分库策略的，库的数量不能超过1024

## 分表

* 采用分表策略的，表的数量不能超过4096
* 单个分表不超过500W行，ibd文件大小不超过2G，这样才能让数据分布式变得性能更佳。

* 水平分表尽量用取模方式，日志、报表类数据建议采用日期进行分表
* 垂直分表，考虑冷热数据拆分，公用-专用数据拆分，text类型字段拆分

## 分区

单个数据表 可以设置分区——分区表是一个逻辑表，多组物理文件

* 分区表的分区字段（partition-key）必须有索引或组合索引的首列，分区表的SQL必须包含分区键
* 分区方式：HASH分区、范围分区(适合定期清理的数据)、LIST分区
* 单个分区表中的分区（包括子分区）个数不能超过1024，上线前必须指定分区表的创建、清理策略。
* 单个分区文件不超过2G，总大小不超过50G。
* 【建议总分区数不超过20个】。