---
sort: 1
---

# 1.架构

```danger
在实际工作中，选择稳定版时，尽量避免使用最新的版本，选择比已出来的最新版晚6～10个月的版本比较好。

工作开发和运维的统一原则为降低耦合度
化繁为简是优秀的运维工程师必须掌握的重要技术思想

经常查看各种服务运行日志是一个很好的习惯，也是成长为高手的必经之路

代码复用要考虑是否给问题排查带来不便
```

日100万PV的架构如何设计？对于这样的问题，下面简单为大家解答思路：

* 首先应尽量考虑把网站数据放到CDN中缓存,独立的静态服务器最适合使用CDN (如：img)
* 要加速的业务数据应该存在独立的域名
* 业务内容图片、附件、JS、CSS等静态元素，这样的静态网站域名才可以使用CDN。
* 剩下的访问量规模需要的架构才是我们需要设计考虑的。

## 动静分离

### 静态请求 缓存，CDN

### 动态请求

削峰填谷

负载均衡

中小企业互联网公司网站在并发访问和总访问量不是很大的情况下，建议首选Nginx负载均衡，
理由是Nginx负载均衡配置简单、使用方便、安全稳定、社区活跃，使用的人逐渐增多，成为流行趋势，
另外一个实现负载均衡的类似产品为Haproxy（支持L4和L7负载，同样优秀，但社区不如Nginx活跃）。


如果要考虑Nginx负载均衡的高可用功能，建议首选Keepalived软件，
理由是安装和配置简单，使用方便，安全稳定，
与Keepalived服务类似的高可用软件还有Heartbeat（使用比较复杂，不建议初学者使用）。

如果门户或大型网站的流量巨大，还可在负载均衡器前再加LVS等处理4层请求的负载均衡器，Nginx负载均衡器只负责处理7层HTTP应用层请求的调度，4层的处理效率比7层的效率要高10倍以上，如果流量再大，可以再加上OSPF调度或DNS调度以承受更大的并发访问。


## 架构选型

## 安全与监控

跳板机可以使用Shell或者Python开发，也可以使用商业版例如齐治堡垒机等产品。

## 故障排查
经常查看服务运行日志是个很好的习惯，也是高手的习惯
### MySQL
如发现3306端口没起来，请tail-100/application/mysql/data/机器名.err查看日志信息，看是否有报错信息，然后根据相关错误提示进行调试。

### I/O 多路复用模型

| Linux | Freebsd | Solaris | Windows |
| ---- | ---- |---- |---- |
| epoll | kqueue | /dev/poll | icop |


# 2.项目管理

## git规则

## 迭代节奏


# 3.代码质量

## 代码规范


## 基类、统一接口


## TDD-测试驱动开发


## CodeReview-交叉评审


# 数据格式

* 方法定义时明确数据格式
* 除统计类数据，常量数据 返回 单值类型外
* 其他数据返回格式默认使用数组格式，方便扩展
* 接口返回 data 内部必须是数组格式
* 方法的返回值 避免使用map, 返回多列更方便在调用处组装需要的各种map

<hr />

{% include list.liquid all=true %}
